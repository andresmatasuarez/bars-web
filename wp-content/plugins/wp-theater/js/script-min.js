(function(e){var c=e("html"),d=e("body"),b=e(window);e(document).ready(function(){if(e(".wp-theater-section").length!==0){e(".wp-theater-section").each(function(){var p=this,n=e(this),k,o,m,l=e(".video-preview",this);if(e(".video-preview").length===0){return}if(n.hasClass("youtube")){k="youtube"}else{if(n.hasClass("vimeo")){k="vimeo"}}if(e(".wp-theater-iframe",this).length!==0){m=e(".wp-theater-bigscreen",this);o=e(".wp-theater-iframe",this)}else{if(n.is("[data-theater-id]")&&e("#"+n.attr("data-theater-id")).length!==0){m=e("#"+n.attr("data-theater-id"));o=e("#"+n.attr("data-theater-id")+" .wp-theater-iframe")}}l.children("a").click(function(q){q.preventDefault()});l.click(function(q){e(".video-preview.selected",p).removeClass("selected");e(this).addClass("selected");o.attr("src",e(this).attr("data-embed-url"));h=parseInt(e(this).attr("data-embed-height"));w=parseInt(e(this).attr("data-embed-width"));ratio=w/h;o.attr("width",w);o.attr("height",h);if(!a(m)){e("html, body").animate({scrollTop:(m.offset().top-25)+"px"},300)}})})}if(e(".wp-theater-bigscreen").length!==0){e(".wp-theater-bigscreen").each(function(){var r=this,n=e(this),l=e(".wp-theater-bigscreen-inner",this),p=e(".wp-theater-bigscreen-options",this),m=e("a.fullwindow-toggle",this),k=e("a.lowerlights-toggle",this),o=e(".wp-theater-iframe",this),q=false;p.show();if(m.length!==0){m.click(function(s){if(!n.hasClass("fullwindow")){i();n.addClass("fullwindow");d.addClass("fullwindow");j(o,parseInt(l.width()),parseInt(l.height())-parseInt(k.height()),p)}else{n.removeClass("fullwindow");o.attr("style","");p.attr("style","");p.show();f()}s.preventDefault()});b.resize(function(){if(n.hasClass("fullwindow")){q=setTimeout(function(){j(o,parseInt(l.width()),parseInt(l.height())-parseInt(k.height()),p)},100)}else{clearTimeout(q)}})}if(k.length!==0){k.click(function(s){if(n.hasClass("lowerlights")){n.removeClass("lowerlights");e("#wp-theater-lowerlights").fadeOut(1000,function(){e("#wp-theater-lowerlights").hide()})}else{n.addClass("lowerlights");if(e("#wp-theater-lowerlights").length==0){d.prepend('<div id="wp-theater-lowerlights">&nbsp;</div>')}e("#wp-theater-lowerlights").hide().fadeIn(1000)}s.preventDefault()})}})}});function j(m,o,n,l){var o=parseInt(o),n=parseInt(n);var k=g(1.777777777,o-40,n-40);l.css("width",Math.round(k.width)+"px");m.css("width",Math.round(k.width)+"px");m.css("height",Math.round(k.height)+"px");l.css("margin-left",Math.round(k.x+20)+"px");m.css("margin-left",Math.round(k.x+20)+"px");m.css("margin-top",Math.round(k.y+30)+"px")}function g(n,m,l){var k={};if(n>=m/l){k.width=parseInt(m);k.height=parseInt(m/n);k.x=0;k.y=parseInt(l-k.height)/2}else{k.width=parseInt(l*n);k.height=parseInt(l);k.x=parseInt(m-k.width)/2;k.y=0}return k}function i(){var m=d.outerWidth(),o=d.outerHeight(),l=[self.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,self.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop];c.data("scroll-position",l);c.data("previous-overflow",c.css("overflow"));c.css("overflow","hidden");window.scrollTo(l[0],l[1]);var n=d.outerWidth()-m;var k=d.outerHeight()-o;d.css({"margin-right":n,"margin-bottom":k})}function f(){c.css("overflow",c.data("previous-overflow"));var k=c.data("scroll-position");window.scrollTo(k[0],k[1]);d.css({"margin-right":0,"margin-bottom":0})}function a(l){var o=b.scrollTop();var n=o+b.height();var k=l.offset().top;var m=k+l.height();return((m<=n)&&(k>=o))}})(jQuery);